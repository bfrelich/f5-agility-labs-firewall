
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.1.3. Creating AFM Network Firewall Rules &#8212; F5 Firewall Solutions  documentation</title>
    
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.1.9. Creating Rules and Policy via REST API" href="lab4.html" />
    <link rel="prev" title="2.1.2. Advanced Firewall Manager (AFM)" href="lab2.html" />
<!--
# Copyright 2017 F5 Networks
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
<link href="https://cdn.f5.com/favicon.ico" rel="icon">
<script src="https://use.fontawesome.com/21fb8a09c3.js"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>
  <body>
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://support.f5.com">Support</a></li>
            <li><a href="https://devcentral.f5.com">Community</a></li>
            <li><a href="https://github.com/F5Networks">GitHub</a></li>
            <li><a href="https://f5.com/about-us/careers">Careers</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44" alt="F5 Networks" title="F5 Networks" border="0">
          </a>
            <ul id="MainMenu" class="main-menu">
              <li>
                <a href="#">Products
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ProductsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Connectors</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-asp-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon ASP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/k8s-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Kubernetes BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/f5-kube-proxy/latest" data-link-type="Nav: Mega">F5 Kubernetes Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/products/connectors">See all </a></--span-->
                      </li>
                      <li class="divider"></li>
                      <li class="third"><span class="a-mm-h">Application Service Proxy</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/asp/latest" data-link-type="Nav: Mega">F5 Application Service Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a href="/products/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Container Integrations
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ContainersSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Container Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/containers/latest/marathon/" data-link-type="Nav: Mega">Mesos Marathon</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/openshift/" data-link-type="Nav: Mega">RedHat OpenShift</a></li>
                        </ul>
                        <span class="seemore"><a data-link-type="Nav: Mega" href="http://clouddocs.f5.com/containers/latest">View details </a></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Clouds
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="CloudsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Cloud Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Resources
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>
                <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third">
                        <span class="a-mm-h">Downloads</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/" class="internalLink">Docker Hub</a></li>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://store.docker.com/images/f5networks" class="internalLink">Docker Store</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <span class="a-mm-h">OpenSource</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks" class="internalLink">GitHub</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega">F5 University</a>
                        <ul>
                          <li>
                            <p>Get up to speed with free self-paced courses</p>
                          </li>
                        </ul>
                        <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                        <ul>
                          <li>
                            <p>Join the community of 250,000+ technical peers</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</nav>

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-3 sidebar">
         <h4><a href="../../">F5 Firewall Solutions </a></h4>
<div id="searchbox" style="display: none" role="search">
  <form class="search" action="../../search.html" method="get">
    <div>
      <input type="text" name="q" placeholder="Search" style="padding-left: 6px;"/>
      <!-- <input type="submit" value="Go" style="margin-top: 4px;"/> -->
      <button type="submit" class="btn btn-primary btn-xs">Go</button>
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <p class="caption">
   <span class="caption-text">Current Page</span>
  </p>
  <ul>
<li><a class="reference internal" href="#">2.1.3. Creating AFM Network Firewall Rules</a><ul>
<li><a class="reference internal" href="#default-actions">2.1.3.1. Default Actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rule-hierarchy">2.1.4. Rule Hierarchy</a></li>
<li><a class="reference internal" href="#create-and-view-log-entries">2.1.5. Create and View Log Entries</a></li>
<li><a class="reference internal" href="#create-a-rule-list">2.1.6. Create a Rule List</a></li>
<li><a class="reference internal" href="#create-a-policy-with-a-rule-list">2.1.7. Create a Policy with a Rule List</a></li>
<li><a class="reference internal" href="#add-the-rule-list-to-a-route-domain">2.1.8. Add the Rule List to a Route Domain</a></li>
</ul>


<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class1.html">2. Advanced Firewall Manager, the ENTERPRISE Firewall</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="module1.html">2.1. Advanced Firewall Manager (AFM) Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module2/module2.html">2.2. AFM Packet Tester</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">2.3. DDoS Protection with AFM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module4/module4.html">2.4. Device Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module5/module5.html">2.5. Network Security (AFM) Management Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module6/module6.html">2.6. External Logging Devices (SevOne)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lab2.html"
                        title="previous chapter">2.1.2. Advanced Firewall Manager (AFM)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lab4.html"
                        title="next chapter">2.1.9. Creating Rules and Policy via REST API</a></p>
        
      </div>
      <div class="col-md-offset-3 col-sm-offset-3 main">
        <h4>
          <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../../index.html">F5 Firewall Solutions</a>
          <span class="right"><a href="../../genindex.html">Index</a></span>
        </h4>
        
  <div class="section" id="creating-afm-network-firewall-rules">
<h1>2.1.3. Creating AFM Network Firewall Rules<a class="headerlink" href="#creating-afm-network-firewall-rules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="default-actions">
<h2>2.1.3.1. Default Actions<a class="headerlink" href="#default-actions" title="Permalink to this headline">¶</a></h2>
<p>The BIG-IP<sup>®</sup> Network Firewall provides policy-based access
control to and from address and port pairs, inside and outside of your
network. Using a combination of contexts, the network firewall can apply
rules in many ways, including: at a global level, on a per-virtual
server level, and even for the management port or a self IP address.
Firewall rules can be combined in a firewall policy, which can contain
multiple context and address pairs, and is applied directly to a virtual
server.</p>
<p>By default, the Network Firewall is configured in <strong>*ADC mode*</strong>, a
default allow configuration, in which all traffic is allowed through the
firewall, and any traffic you want to block must be explicitly
specified.</p>
<p>The system is configured in this mode by default so all traffic on your
system continues to pass after you provision the Advanced Firewall
Manager. You should create appropriate firewall rules to allow necessary
traffic to pass before you switch the Advanced Firewall Manager to
Firewall mode. In <strong>*Firewall mode*</strong>, a default deny configuration, all
traffic is blocked through the firewall, and any traffic you want to
allow through the firewall must be explicitly specified.</p>
<p>The BIG-IP<sup>®</sup> Network Firewall provides policy-based access
control to and from address and port pairs, inside and outside of your
network. By default, the network firewall is configured in ADC mode,
which is a <strong>*default allow*</strong> configuration, in which all traffic is
allowed to virtual servers and self IPs on the system, and any traffic
you want to block must be explicitly specified. This applies only to the
Virtual Server &amp; Self IP level on the system.</p>
<p>Important: Even though the system is in a default allow configuration,
if a packet matches no rule in any context on the firewall, a Global
Drop rule drops the traffic.</p>
</div>
</div>
<div class="section" id="rule-hierarchy">
<h1>2.1.4. Rule Hierarchy<a class="headerlink" href="#rule-hierarchy" title="Permalink to this headline">¶</a></h1>
<p>With the BIG-IP<sup>®</sup> Network Firewall, you use a context to
configure the level of specificity of a firewall rule or policy. For
example, you might make a global context rule to block ICMP ping
messages, and you might make a virtual server context rule to allow only
a specific network to access an application.</p>
<p>Context is processed in this order:</p>
<ul class="simple">
<li>Global</li>
<li>Route domain</li>
<li>Virtual server / self IP</li>
<li>Management port*</li>
<li>Global drop*</li>
</ul>
<p>The firewall processes policies and rules in order, progressing from the
global context, to the route domain context, and then to either the
virtual server or self IP context. Management port rules are processed
separately, and are not processed after previous rules. Rules can be
viewed in one list, and viewed and reorganized separately within each
context. You can enforce a firewall policy on any context except the
management port. You can also stage a firewall policy in any context
except management.</p>
<p>Important: You cannot configure or change the Global Drop context. The
Global Drop context is the final context for traffic. Note that even
though it is a global context, it is not processed first, like the main
global context, but last. If a packet matches no rule in any previous
context, the Global Drop rule drops the traffic.</p>
<p><a class="reference internal" href="../../_images/image10.png"><img alt="image9" src="../../_images/image10.png" style="width: 4.74410in; height: 5.21054in;" /></a></p>
</div>
<div class="section" id="create-and-view-log-entries">
<h1>2.1.5. Create and View Log Entries<a class="headerlink" href="#create-and-view-log-entries" title="Permalink to this headline">¶</a></h1>
<p>In this section, you will generate various types of traffic through the
virtual server as you did previously, but now you will view the log
entries using the network firewall log. Open the <strong>*Security &gt; Event
Logs &gt; Network &gt; Firewall*</strong> page on bigip01.agility.com (10.0.0.4). The
log file is empty because no traffic has been sent to the virtual server
since you enabled logging.</p>
<ul class="simple">
<li>Open a new Web browser and access your <strong>*wildcard_vs*</strong>
<a class="reference external" href="http://10.128.10.223">*http://10.128.10.223*</a></li>
<li>Edit the URL to
<a class="reference external" href="http://10.128.10.223:8081">*http://10.128.10.223:8081*</a></li>
<li>Edit the URL to <a class="reference external" href="https://10.128.10.223">*https://10.128.10.223*</a></li>
<li>Open either Chrome or Firefox and access
<a class="reference external" href="ftp://10.128.10.223">*ftp://10.128.10.223*</a></li>
<li>Open Putty and access 10.128.10.223, you do not need to log in.</li>
<li>Close all Web browsers and Putty sessions.</li>
<li>In the Configuration Utility, reload the Firewall log page.<ul>
<li><strong>*Security &gt; Event Logs &gt; Network &gt; Firewall*</strong></li>
</ul>
</li>
<li>Sort the list in descending order by the Time column.</li>
</ul>
<p><a class="reference internal" href="../../_images/image11.png"><img alt="image10" src="../../_images/image11.png" style="width: 7.25069in; height: 1.99792in;" /></a></p>
<p>Examine the Source Address and Destination Port values. Note how
requests for all services were established and none were blocked.
Although we will not configure external logging in this lab, you should
be aware that the BIG-IP supports high speed external logging in various
formats including <strong>*SevOne*</strong>, <strong>*Splunk*</strong> and <strong>*ArcSight*</strong>. Below
are some examples of AFM Firewall and DoS logs being presented by
SevOne:</p>
<p><a class="reference internal" href="../../_images/image12.png"><img alt="image11" src="../../_images/image12.png" style="width: 6.50000in; height: 1.86458in;" /></a></p>
</div>
<div class="section" id="create-a-rule-list">
<h1>2.1.6. Create a Rule List<a class="headerlink" href="#create-a-rule-list" title="Permalink to this headline">¶</a></h1>
<p>Rule lists are a way to group a set of individual rules together and
apply them to the active rule base as a group. A typical use of a rule
list would be for a set of applications that have common requirements
for access protocols and ports. As an example, most web applications
would require TCP port 80 for HTTP and TCP port 443 for SSL/TLS. You
could create a Rule list with these protocols, and apply them to each of
your virtual servers.</p>
<p>Let’s examine some of the default rule lists that are included with AFM.
Go to <strong>*Security &gt;Network Firewall &gt; Rule Lists*</strong>. They are:</p>
<ul class="simple">
<li>_sys_self_allow_all</li>
<li>_sys_self_allow_defaults</li>
<li>_sys_self_allow_management</li>
</ul>
<p><a class="reference internal" href="../../_images/image13.png"><img alt="image12" src="../../_images/image13.png" style="width: 6.50000in; height: 1.46319in;" /></a></p>
<p>If you click on <strong>*_sys_self_allow_management*</strong> you’ll see that it
is made up of two different rules that will allow management traffic
(port 22/SSH and port 443 HTTPS). Instead of applying multiple rules
over and over across multiple virtual servers, you can put them in a
rule list and then apply the rule list as an ACL.</p>
<p><a class="reference internal" href="../../_images/image14.png"><img alt="image13" src="../../_images/image14.png" style="width: 6.50000in; height: 0.80278in;" /></a></p>
<p>On bigip01.agility.com (10.0.0.4) create a rule list to allow Web
traffic. A logical container must be created before the individual rules
can be added. You will create a list with three rules, to allow port 80
(HTTP), allow port 443 (HTTPS) and reject traffic from a specific IP
subnet. First you need to create a container for the rules by going to
<strong>*Security &gt; Network Firewall &gt; Rule Lists*</strong> and select <strong>*Create*.</strong>
For the <strong>*Name*</strong> enter <strong>*web_rule_list*</strong>, provide an optional
description and then click <strong>*Finished*.</strong></p>
<p><a class="reference internal" href="../../_images/image15.png"><img alt="image14" src="../../_images/image15.png" style="width: 3.26105in; height: 1.47052in;" /></a></p>
<p>Edit the <strong>*web_rule_list*</strong> by selecting it in the Rule Lists table,
then click the <strong>*Add*</strong> button in the Rules section. Here you will add
three rules into the list; the first is a rule to allow HTTP.</p>
<p><a class="reference internal" href="../../_images/image16.png"><img alt="image15" src="../../_images/image16.png" style="width: 6.30515in; height: 1.66925in;" /></a></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Name</strong></td>
<td>allow_http</td>
</tr>
<tr class="row-even"><td><strong>Protocol</strong></td>
<td>TCP</td>
</tr>
<tr class="row-odd"><td><strong>Source</strong></td>
<td>Leave at Default of <strong>*Any*</strong></td>
</tr>
<tr class="row-even"><td><strong>Destination Address</strong></td>
<td>Any</td>
</tr>
<tr class="row-odd"><td><strong>Destination Port</strong></td>
<td>Specify Single Port <strong>*80*</strong>, then click <strong>*Add*</strong></td>
</tr>
<tr class="row-even"><td><strong>Action</strong></td>
<td>Accept</td>
</tr>
<tr class="row-odd"><td><strong>Logging</strong></td>
<td>Enabled</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image17.png"><img alt="image16" src="../../_images/image17.png" style="width: 3.34926in; height: 3.60993in;" /></a></p>
<p>Select <strong>Repeat</strong> when done.</p>
<p>Create a rule to allow HTTPS.</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Name</strong></td>
<td>allow_https</td>
</tr>
<tr class="row-even"><td><strong>Protocol</strong></td>
<td>TCP</td>
</tr>
<tr class="row-odd"><td><strong>Source</strong></td>
<td>Leave at Default of Any</td>
</tr>
<tr class="row-even"><td><strong>Destination Address</strong></td>
<td>Any</td>
</tr>
<tr class="row-odd"><td><strong>Destination Port</strong></td>
<td>Specify Single Port 443, then click <strong>*Add*</strong></td>
</tr>
<tr class="row-even"><td><strong>Action</strong></td>
<td>Accept</td>
</tr>
<tr class="row-odd"><td><strong>Logging</strong></td>
<td>Enabled</td>
</tr>
</tbody>
</table>
<p>Select <strong>Finished</strong> when done. Create another rule by clicking <strong>*Add*</strong>
to reject all access from the 10.0.10.0/24 network.</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Name</strong></td>
<td>reject_10_0_10_0</td>
</tr>
<tr class="row-even"><td><strong>Protocol</strong></td>
<td>Any</td>
</tr>
<tr class="row-odd"><td><strong>Source</strong></td>
<td>Address 10.0.10.0/24, then click <strong>*Add*</strong></td>
</tr>
<tr class="row-even"><td><strong>Destination Address</strong></td>
<td>Any</td>
</tr>
<tr class="row-odd"><td><strong>Destination Port</strong></td>
<td>Any</td>
</tr>
<tr class="row-even"><td><strong>Action</strong></td>
<td>Reject</td>
</tr>
<tr class="row-odd"><td><strong>Logging</strong></td>
<td>Enabled</td>
</tr>
</tbody>
</table>
<p>Select <strong>*Finished*</strong> when done. When you exit you’ll notice the reject
rule is after the <strong>*allow_http*</strong> and <strong>*allow_https*</strong> rules. This
means that HTTP and HTTPS traffic from 10.0.10.0/24 will be accepted,
while all other traffic from this subnet will be rejected based on the
ordering of the rules as seen below:</p>
<p><a class="reference internal" href="../../_images/image18.png"><img alt="image17" src="../../_images/image18.png" style="width: 6.50000in; height: 0.48681in;" /></a></p>
</div>
<div class="section" id="create-a-policy-with-a-rule-list">
<h1>2.1.7. Create a Policy with a Rule List<a class="headerlink" href="#create-a-policy-with-a-rule-list" title="Permalink to this headline">¶</a></h1>
<p>Policies are a way to group a set of individual rules together and apply
them to the active policy base as a group. A typical use of a policy
list would be for a set of rule lists that have common requirements for
access protocols and ports.</p>
<p>Create a policy list to allow the traffic you created in the rule list
in the previous section. A logical container must be created before the
individual rules can be added. First you need to create a container for
the policy by going to <strong>*Security &gt; Network Firewall &gt; Policies*</strong> and
select <strong>*Create*.</strong> For the <strong>*Name*</strong> enter <strong>*rd_0_policy*</strong>,
provide an optional description and then click <strong>*Finished*.</strong></p>
<p><a class="reference internal" href="../../_images/image19.png"><img alt="image18" src="../../_images/image19.png" style="width: 4.92847in; height: 1.35694in;" /></a></p>
<p>Edit the <strong>*rd_0_policy*</strong> by selecting it in the Policy Lists table,
then click the <strong>*Add*</strong> button in the Rules section. Here you will add
the rule list you created in the previous section. For the <strong>*Name*</strong>
enter <strong>*web_policy*</strong>, provide an optional description, for type
select <strong>*Rule List,*</strong> select the Rule List “<strong>*web_rule_list*</strong>”
and then click <strong>*Finished*.</strong></p>
<p><a class="reference internal" href="../../_images/image20.png"><img alt="image19" src="../../_images/image20.png" style="width: 4.04722in; height: 1.93264in;" /></a></p>
<p>When finished your policy should look similar to the screenshot below.</p>
<p><a class="reference internal" href="../../_images/image21.png"><img alt="image20" src="../../_images/image21.png" style="width: 6.47361in; height: 1.78958in;" /></a></p>
</div>
<div class="section" id="add-the-rule-list-to-a-route-domain">
<h1>2.1.8. Add the Rule List to a Route Domain<a class="headerlink" href="#add-the-rule-list-to-a-route-domain" title="Permalink to this headline">¶</a></h1>
<p>In this section, you are going to attach the rule to a route domain
using the <strong>*Security*</strong> selection in the top bar within the <strong>*Route
Domain*</strong> GUI interface. Go to <strong>*Network*</strong>, then click on <strong>*Route
Domains*</strong>, then select the hyperlink for route domain <strong>*0*</strong>. Now
click on the <strong>*Security*</strong> top bar selection, which is a new option
that was added in version 11.3. From the Network Firewall Enforcement
dropdown menu select enabled. Select the policy you just created
“rd_0_policy” and click update.</p>
<p>Review the rules that are now applied to this route domain.</p>
<p><a class="reference internal" href="../../_images/image22.png"><img alt="image21" src="../../_images/image22.png" style="width: 6.49514in; height: 2.50556in;" /></a></p>
<p>We will insert a reject clause into the existing rule list so that you
can examine different types of log entries. Go to <strong>*Security &gt; Network
Firewall &gt; Rule Lists*</strong>. Select the <strong>*web_rule_list*</strong> you created
earlier so that you may edit it, and then click the <strong>*Add*</strong> button.</p>
<p><a class="reference internal" href="../../_images/image23.png"><img alt="image22" src="../../_images/image23.png" style="width: 6.50000in; height: 0.78750in;" /></a></p>
<p>For <strong>*Name*</strong> configure <strong>*reject_all*</strong>, and leave all options
default except set <strong>*Action*</strong> for <strong>*Reject*</strong>, and set <strong>*Logging*</strong>
to <strong>*Enabled*</strong>, then click <strong>*Finished*</strong>.</p>
<p><a class="reference internal" href="../../_images/image24.png"><img alt="image23" src="../../_images/image24.png" style="width: 2.49327in; height: 2.28456in;" /></a></p>
<p>Your rule set should look similar to the screenshot below:</p>
<p><a class="reference internal" href="../../_images/image25.png"><img alt="image24" src="../../_images/image25.png" style="width: 6.50000in; height: 0.91667in;" /></a></p>
</div>


        
		     <div class="row next-prev-btn-row">
           <div class="col-lg-12">
           
		        <a href="lab2.html" title="2.1.2. Advanced Firewall Manager (AFM)" accesskey="p" class="btn btn-primary pull-left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
           
           
              <a href="lab4.html" title="2.1.9. Creating Rules and Policy via REST API" accesskey="n" class="btn btn-primary pull-right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
           
		     </div>
         </div>
        
      </div>
    </div>
  </div>


  <footer>
      <div class="container-fluid">
        <div class="row">
          <div class="content-fluid pre-footer">
            <div class="blocks-container">
              <div class="block">
                <h3>Support Programs</h3>
                <p>Regionally located support centers enable F5 to provide support in a number of languages through native-speaking support engineers.</p>
                <a class="btn internalLink" data-ng-href="https://f5.com/support/support-offerings" target="_blank" href="https://f5.com/support/support-offerings">See more
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Contact Support</h3>
                <p>
                  North America: 1-888-882-7535<br>
                  Outside North America: 800-11-275-435
                </p>
                <a class="btn internalLink" data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" href="https://f5.com/about-us/contact#regional-support">Local Support Numbers
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Feedback and Help</h3>
                <p>Have questions, suggestions, or just want to get something off your chest? Let us know.</p>
                <a class="btn" data-ui-sref="siteFeedback" target="_blank" href="https://support.f5.com/csp/siteFeedback">Leave feedback</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="footer">
            <div class="container">
              <div class="col-sm-3 col-md-2">
                <h4>About F5</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/about-us/contact" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact" class="internalLink">Contact F5</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/about-us/careers" target="_blank" data-link-type="footer" href="https://f5.com/about-us/careers" class="internalLink">Careers</a>
                  </li>
                </ul>
              </div>
              <div class="col-sm-3 col-md-2">
                <h4>Education</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/education/training" target="_blank" data-link-type="footer" href="https://f5.com/education/training" class="internalLink">Training</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/certification" target="_blank" data-link-type="footer" href="https://f5.com/education/certification" class="internalLink">Certification</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/training/free-courses" target="_blank" data-link-type="footer" href="https://f5.com/education/training/free-courses" class="internalLink">Free Online Training</a>
                  </li>
                </ul>
              </div>

              <div class="col-sm-3 col-md-2">
                <h4>F5 sites</h4>
                <ul>
                <li><a data-ng-href="https://f5.com" target="_blank" data-link-type="footer" href="https://f5.com" class="internalLink">F5.com</a>
                </li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" data-link-type="footer" href="https://devcentral.f5.com" class="internalLink">Community</a>
                </li>
                <li><a data-ng-href="https://partners.f5.com" target="_blank" data-link-type="footer" href="https://partners.f5.com" class="internalLink">Partners</a>
                </li>
            </ul>
        </div>

        <div class="col-sm-3 col-md-2">
            <h4>Support Tasks</h4>
            <ul>
                <li><a data-ui-sref="mySupport.createServiceRequest" data-link-type="footer" href="https://support.f5.com/csp/my-support/service-request">Create Service Request </a>
                </li>
                <li><a data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact#regional-support" class="internalLink">Contact Support</a>
                </li>
                <li><a data-ui-sref="siteFeedback" target="_blank" data-link-type="footer" href="https://support.f5.com/csp/siteFeedback">Leave feedback [+]</a>
                </li>
            </ul>
        </div>

        <div class="col-xs-12 col-md-3 right">
            <h4>Connect with us</h4>
            <ul class="social_icons">
                <li><a href="//twitter.com/f5networks" target="_blank" data-name="twitter" data-type="" data-prefix="social" data-utf="E032" title="Twitter" class="externalLink"><i class="icon-1x icon-twitter icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.linkedin.com/companies/f5-networks" target="_blank" class="linkedin externalLink" title="LinkedIn"><i class="icon-1x icon-linkedin icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.facebook.com/f5networksinc" target="_blank" class="facebook externalLink" title="Facebook"><i class="icon-1x icon-facebook icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.youtube.com/f5networksinc" target="_blank" class="youtube externalLink" title="YouTube"><i class="icon-1x icon-youtube icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" class="devcentral internalLink" title="DevCentral" href="https://devcentral.f5.com"><i class="icon-1x icon-dc-pos icon-inverse-circle" data-link-type="footer"></i></a></li>
            </ul>
        </div>

        <div class="content-fluid left">
            <div class="col-xs-12">
                <p>
                    © Copyright <span class="ng-binding">2017</span> by F5 Networks, Inc. |
                    <a data-ng-href="https://f5.com/about-us/policies" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies" class="internalLink">Policies</a> |
                    <a data-ng-href="https://f5.com/about-us/policies/trademarks" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies/trademarks" class="internalLink">Trademarks</a>
                </p>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
</footer>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  </body>
</html>